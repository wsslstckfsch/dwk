(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"6ANv":function(t,e,n){"use strict";n.r(e),n.d(e,"ShopModule",function(){return I});var i=n("ofXK"),c=n("PCNd"),a=n("tyNb");class s{constructor(){this.typeId=0,this.sort="name",this.pageIndex=1,this.pageSize=50}}var r=n("fXoL"),o=n("tk/3");class p{constructor(){this.data=[]}}var u=n("LRne"),b=n("lJxs"),d=n("AytR");let h=(()=>{class t{constructor(t){this.http=t,this.baseUrl=d.a.apiUrl,this.products=[],this.productTypes=[],this.pagination=new p,this.shopParams=new s,this.productCache=new Map}getProducts(t){if(!1===t&&(this.productCache=new Map),this.productCache.size>0&&!0===t&&this.productCache.has(Object.values(this.shopParams).join("-")))return this.pagination.data=this.productCache.get(Object.values(this.shopParams).join("-")),Object(u.a)(this.pagination);let e=new o.e;return this.shopParams.typeId>0&&(e=e.append("typeId",this.shopParams.typeId.toString())),this.shopParams.search&&(e=e.append("search",this.shopParams.search)),e=e.append("sort",this.shopParams.sort),e=e.append("pageIndex",this.shopParams.pageIndex.toString()),e=e.append("pageSize",this.shopParams.pageSize.toString()),this.http.get(`${this.baseUrl}/products`,{observe:"response",params:e}).pipe(Object(b.a)(t=>(this.productCache.set(Object.values(this.shopParams).join("-"),t.body.data),this.pagination=t.body,this.pagination)))}setShopParams(t){this.shopParams=t}getShopParams(){return this.shopParams}getProduct(t){let e;return this.productCache.forEach(n=>{e=n.find(e=>e.id===t)}),e?Object(u.a)(e):this.http.get(`${this.baseUrl}/products/${t}`)}getProductTypes(){return this.productTypes.length>0?Object(u.a)(this.productTypes):this.http.get(`${this.baseUrl}/products/types`).pipe(Object(b.a)(t=>(this.productTypes=t,t)))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(o.b))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=n("cAP4"),g=n("3Pt+");const m=["search"];function P(t,e){if(1&t&&(r.Pb(0,"option",16),r.sc(1),r.Ob()),2&t){const t=e.$implicit,n=r.Yb(2);r.ec("value",t.value)("selected",n.shopParams.sort===t.value),r.yb(1),r.uc(" ",t.name," ")}}function f(t,e){if(1&t&&(r.Pb(0,"option",17),r.sc(1),r.Ob()),2&t){const t=e.$implicit;r.ec("value",t.id),r.yb(1),r.uc(" ",t.name," ")}}function y(t,e){if(1&t){const t=r.Qb();r.Pb(0,"li",18),r.Pb(1,"div",19),r.Pb(2,"a",20),r.Kb(3,"img",21),r.Pb(4,"div",22),r.Kb(5,"span",23),r.Ob(),r.Ob(),r.Pb(6,"div",24),r.Pb(7,"a",25),r.Pb(8,"h3",26),r.sc(9),r.Ob(),r.Ob(),r.Pb(10,"div",27),r.Pb(11,"span",28),r.sc(12),r.Ob(),r.Pb(13,"span",28),r.sc(14),r.Ob(),r.Ob(),r.Pb(15,"div",29),r.Pb(16,"p"),r.sc(17),r.Zb(18,"currency"),r.Ob(),r.Pb(19,"button",13),r.Wb("click",function(){r.lc(t);const n=e.$implicit;return r.Yb(2).addItemToBasket(n)}),r.Kb(20,"span",30),r.Kb(21,"span",31),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()}if(2&t){const t=e.$implicit;r.yb(2),r.fc("routerLink","/shop/",t.id,""),r.yb(1),r.ec("src",t.imageUrl,r.nc),r.yb(4),r.fc("routerLink","/shop/",t.id,""),r.yb(2),r.tc(t.name),r.yb(3),r.tc(t.productType),r.yb(2),r.tc(t.langAlpha2),r.yb(3),r.tc(r.ac(18,7,t.price))}}function O(t,e){if(1&t){const t=r.Qb();r.Nb(0),r.Pb(1,"div",1),r.Kb(2,"hr",2),r.Pb(3,"div",3),r.Pb(4,"div",4),r.Pb(5,"select",5),r.Wb("change",function(e){return r.lc(t),r.Yb().onSortSelected(e)}),r.rc(6,P,2,3,"option",6),r.Ob(),r.Pb(7,"select",5),r.Wb("change",function(e){return r.lc(t),r.Yb().onTypeSelected(e)}),r.rc(8,f,2,2,"option",7),r.Ob(),r.Ob(),r.Pb(9,"div",8),r.Pb(10,"div",9),r.Kb(11,"a",10),r.Pb(12,"input",11,12),r.Wb("keyup.enter",function(){return r.lc(t),r.Yb().onSearch()}),r.Ob(),r.Ob(),r.Pb(14,"button",13),r.Wb("click",function(){return r.lc(t),r.Yb().onSearch()}),r.sc(15," Suchen "),r.Ob(),r.Pb(16,"button",13),r.Wb("click",function(){return r.lc(t),r.Yb().onReset()}),r.sc(17," Reset "),r.Ob(),r.Ob(),r.Ob(),r.Pb(18,"ul",14),r.rc(19,y,22,9,"li",15),r.Ob(),r.Ob(),r.Mb()}if(2&t){const t=r.Yb();r.yb(6),r.ec("ngForOf",t.sortOptions),r.yb(2),r.ec("ngForOf",t.productTypes),r.yb(11),r.ec("ngForOf",t.products)}}let v=(()=>{class t{constructor(t,e){this.shopService=t,this.basketService=e,this.sortOptions=[{name:"Alphabetical",value:"name"},{name:"Price Asc",value:"priceAsc"},{name:"Price Desc",value:"priceDesc"}],this.shopParams=this.shopService.getShopParams()}ngOnInit(){this.getProducts(!0),this.getProductTypes()}addItemToBasket(t){this.basketService.addItemToBasket(t)}getProducts(t=!1){this.shopService.getProducts(t).subscribe(t=>{this.products=t.data,this.totalCount=t.count},t=>{console.log(t)})}getProductTypes(){this.shopService.getProductTypes().subscribe(t=>{this.productTypes=[{id:0,name:"All books"},...t]},t=>{console.log(t)})}onTypeSelected(t){const e=this.shopService.getShopParams();e.typeId=t.target.value,e.pageIndex=1,this.shopService.setShopParams(e),this.getProducts()}onSortSelected(t){const e=this.shopService.getShopParams();e.sort=t.target.value,this.shopService.setShopParams(e),this.getProducts()}onPageChanged(t){const e=this.shopService.getShopParams();e.pageIndex!==t&&(e.pageIndex=t,this.shopService.setShopParams(e),this.getProducts(!0))}onSearch(){const t=this.shopService.getShopParams();t.search=this.searchString.nativeElement.value,t.pageIndex=1,this.shopService.setShopParams(t),this.getProducts()}onReset(){this.searchString.nativeElement.value="",this.shopParams=new s,this.shopService.setShopParams(this.shopParams),this.getProducts()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(h),r.Jb(l.a))},t.\u0275cmp=r.Db({type:t,selectors:[["app-shop"]],viewQuery:function(t,e){if(1&t&&r.wc(m,1),2&t){let t;r.jc(t=r.Xb())&&(e.searchString=t.first)}},decls:1,vars:1,consts:[[4,"ngIf"],[1,"uk-container","uk-margin-large-top"],[1,"uk-divider-icon"],[1,"top-bar","uk-margin-large-top"],[1,"top-bar__left"],[1,"uk-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value",4,"ngFor","ngForOf"],[1,"top-bar__right"],[1,"uk-inline"],["href","#","uk-icon","icon: search",1,"uk-form-icon"],["type","text",1,"uk-input",3,"keyup.enter"],["search",""],[1,"uk-button","uk-button-default",3,"click"],[1,"cards"],["class","card",4,"ngFor","ngForOf"],[3,"value","selected"],[3,"value"],[1,"card"],[1,"uk-card","uk-card-default"],[1,"uk-card-media-top","img-overlay",3,"routerLink"],["alt","",1,"card__image",3,"src"],[1,"overlay"],["uk-icon","icon: search; ratio: 3;"],[1,"uk-card-body"],[3,"routerLink"],[1,"uk-card-title"],[1,"labels"],[1,"uk-label","card__label"],[1,"card__last-row"],["uk-icon","cart"],["uk-icon","icon: plus; ratio: 0.6;"]],template:function(t,e){1&t&&r.rc(0,O,20,3,"ng-container",0),2&t&&r.ec("ngIf",e.productTypes&&e.products)},directives:[i.m,i.l,g.h,g.l,a.f],pipes:[i.d],styles:[".top-bar[_ngcontent-%COMP%]{display:grid}@media (min-width:961px){.top-bar[_ngcontent-%COMP%]{grid-template-columns:auto auto;justify-content:space-between}}.top-bar__left[_ngcontent-%COMP%]{display:grid;gap:.3rem}@media (min-width:961px){.top-bar__left[_ngcontent-%COMP%]{grid-template-columns:repeat(2,auto)}}.top-bar__right[_ngcontent-%COMP%]{display:grid;gap:.3rem}@media (max-width:959px){.top-bar__right[_ngcontent-%COMP%]{margin-top:.3rem}}@media (min-width:961px){.top-bar__right[_ngcontent-%COMP%]{grid-template-columns:minmax(300px,1fr) repeat(2,auto)}}.cards[_ngcontent-%COMP%]{list-style:none;padding:0;display:grid;gap:1rem}@media (min-width:961px){.cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width:1201px){.cards[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.card[_ngcontent-%COMP%]   .uk-card-media-top[_ngcontent-%COMP%]{display:block;padding:1rem}.card[_ngcontent-%COMP%]   .uk-card-body[_ngcontent-%COMP%]{display:grid;gap:.6rem}.card[_ngcontent-%COMP%]   .uk-card-body[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin:0}.card__image[_ngcontent-%COMP%]{height:300px;width:100%;object-fit:contain}.card__label[_ngcontent-%COMP%]{justify-self:start}.card__last-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]}),t})();var k=n("pLZG"),_=n("gyNX"),S=n.n(_),C=n("tc9g");function w(t,e){if(1&t){const t=r.Qb();r.Nb(0),r.Pb(1,"div",1),r.Pb(2,"a",2),r.Wb("click",function(){return r.lc(t),r.Yb().openLightbox()}),r.Kb(3,"img",3),r.Pb(4,"div",4),r.Kb(5,"span",5),r.Ob(),r.Ob(),r.Pb(6,"div",6),r.Pb(7,"h2"),r.sc(8),r.Ob(),r.Pb(9,"div",7),r.Pb(10,"span",8),r.sc(11),r.Ob(),r.Pb(12,"span",8),r.sc(13),r.Ob(),r.Ob(),r.Pb(14,"h4"),r.sc(15),r.Zb(16,"currency"),r.Ob(),r.Pb(17,"div",9),r.Pb(18,"div",10),r.Pb(19,"button",11),r.Wb("click",function(){return r.lc(t),r.Yb().decrementQuantity()}),r.Kb(20,"span",12),r.Ob(),r.Pb(21,"span",13),r.sc(22),r.Ob(),r.Pb(23,"button",11),r.Wb("click",function(){return r.lc(t),r.Yb().incrementQuantity()}),r.Kb(24,"span",14),r.Ob(),r.Ob(),r.Pb(25,"button",15),r.Wb("click",function(){return r.lc(t),r.Yb().addItemToBasket()}),r.Kb(26,"span",16),r.Kb(27,"span",17),r.Ob(),r.Ob(),r.Kb(28,"div",18),r.Pb(29,"small"),r.sc(30),r.Ob(),r.Pb(31,"div",19),r.Pb(32,"a",20),r.sc(33,"Vorschau"),r.Ob(),r.Kb(34,"a",21),r.Kb(35,"a",22),r.Ob(),r.Ob(),r.Ob(),r.Mb()}if(2&t){const t=r.Yb();r.yb(3),r.ec("src",t.product.imageUrl,r.nc),r.yb(5),r.tc(t.product.name),r.yb(3),r.tc(t.product.productType),r.yb(2),r.tc(t.product.langAlpha2),r.yb(2),r.tc(r.ac(16,10,t.product.price)),r.yb(7),r.tc(t.quantity),r.yb(6),r.ec("innerHTML",t.product.description,r.mc),r.yb(2),r.uc("",t.staticContentUrl,"/static/images/products/1.png"),r.yb(2),r.fc("href","",t.staticContentUrl,"/static/images/products/1.png",r.nc),r.yb(2),r.fc("href","",t.staticContentUrl,"/static/images/products/2.png",r.nc)}}const M=[{path:"",component:v},{path:":id",component:(()=>{class t{constructor(t,e,n,i,c){this.shopService=t,this.activatedRoute=e,this.bcService=n,this.basketService=i,this.router=c,this.staticContentUrl=d.a.staticContentUrl,this.quantity=1,this.bcService.set("@productDetails",""),c.events.pipe(Object(k.a)(t=>t instanceof a.b)).subscribe(t=>{this.getProduct()})}ngOnInit(){}addItemToBasket(){this.basketService.addItemToBasket(this.product,this.quantity)}incrementQuantity(){this.quantity++}decrementQuantity(){this.quantity>1&&this.quantity--}getProduct(){this.shopService.getProduct(+this.activatedRoute.snapshot.paramMap.get("id")).subscribe(t=>{this.product=t,console.log(this.product.name),this.bcService.set("@productDetails",t.name)},t=>{console.log(t)})}openLightbox(){S.a.lightbox("#lightbox").show(0)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(h),r.Jb(a.a),r.Jb(C.b),r.Jb(l.a),r.Jb(a.c))},t.\u0275cmp=r.Db({type:t,selectors:[["app-product-details"]],decls:2,vars:1,consts:[[4,"ngIf"],[1,"product-grid","uk-container","uk-margin-top"],[1,"product-grid__image","img-overlay",3,"click"],["alt","",3,"src"],[1,"overlay"],["uk-icon","icon: search; ratio: 3;"],[1,"product-grid__info"],[1,"labels"],[1,"uk-label","card__label"],[1,"cart-buttons"],[1,"incrementer"],[1,"uk-button","uk-button-default","uk-button-small",3,"click"],["uk-icon","icon: minus; ratio: 0.5;"],[1,"number"],["uk-icon","icon: plus; ratio: 0.5;"],[1,"uk-button","uk-button-default","uk-button-small","cart-buttons__add",3,"click"],["uk-icon","cart"],["uk-icon","icon: plus; ratio: 0.6;"],[3,"innerHTML"],["id","lightbox","uk-lightbox","animation: slide"],["data-caption","Caption 1",3,"href"],["data-caption","Caption 2",3,"href"],["data-caption","Caption 3","href","https://picsum.photos/500"]],template:function(t,e){1&t&&(r.rc(0,w,36,12,"ng-container",0),r.Kb(1,"app-shop")),2&t&&r.ec("ngIf",e.product)},directives:[i.m,v],pipes:[i.d],styles:[".product-grid[_ngcontent-%COMP%]{display:grid;margin:0 auto}@media (max-width:959px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:.5fr 1fr}}@media (min-width:961px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.product-grid__image[_ngcontent-%COMP%]{align-self:start}.product-grid__info[_ngcontent-%COMP%]{padding:1rem;display:grid;grid-auto-flow:row;align-content:start;gap:1rem}.product-grid__info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0}.cart-buttons[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;justify-content:start;gap:1rem}.cart-buttons__add[_ngcontent-%COMP%]{min-width:60px;white-space:nowrap}"]}),t})(),data:{breadcrumb:{alias:"productDetails"}}}];let x=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(M)],a.g]}),t})(),I=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[i.c,c.a,x]]}),t})()}}]);
//# sourceMappingURL=10.63072dce7341d5a4ca2a.js.map