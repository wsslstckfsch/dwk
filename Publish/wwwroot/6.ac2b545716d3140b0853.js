(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{jcJX:function(e,t,r){"use strict";r.r(t),r.d(t,"AccountModule",function(){return F});var i=r("ofXK"),n=r("tyNb"),o=r("3Pt+"),s=r("HDdC"),a=r("3N8a");const c=new(r("IjjT").a)(a.a);var u=r("DH7j");function b(e){return!Object(u.a)(e)&&e-parseFloat(e)+1>=0}var l=r("z+Ro");function p(e){const{index:t,period:r,subscriber:i}=e;if(i.next(t),!i.closed){if(-1===r)return i.complete();e.index=t+1,this.schedule(e,r)}}var d=r("LRne"),m=r("eIep"),g=r("lJxs"),f=r("fXoL"),h=r("2rwd"),v=r("gA0Q");function w(e,t){if(1&e&&(f.Pb(0,"li"),f.sc(1),f.Ob()),2&e){const e=t.$implicit;f.yb(1),f.tc(e)}}function y(e,t){if(1&e&&(f.Pb(0,"ul",7),f.rc(1,w,2,1,"li",8),f.Ob()),2&e){const e=f.Yb();f.yb(1),f.ec("ngForOf",e.registerErrors)}}const O=[{path:"login",component:(()=>{class e{constructor(e,t,r,i){this.accountService=e,this.router=t,this.fb=r,this.activatedRoute=i}ngOnInit(){this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/shop",this.createLoginForm(),this.createRegisterForm()}createLoginForm(){this.loginForm=this.fb.group({email:[null,[o.k.required,o.k.pattern("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$")]],password:[null,[o.k.required]]})}createRegisterForm(){this.registerForm=this.fb.group({email:[null,[o.k.required,o.k.pattern("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$")],[this.validateEmailNotTaken()]],password:[null,[o.k.required]]})}onLogin(){this.accountService.login(this.loginForm.value).subscribe(()=>{this.router.navigateByUrl(this.returnUrl)},e=>{console.log(e)})}onRegister(){this.accountService.register(this.registerForm.value).subscribe(e=>{this.router.navigateByUrl("/shop")},e=>{console.log(e),this.registerErrors=e.errors})}validateEmailNotTaken(){return e=>function(e=0,t,r){let i=-1;return b(t)?i=Number(t)<1?1:Number(t):Object(l.a)(t)&&(r=t),Object(l.a)(r)||(r=c),new s.a(t=>{const n=b(e)?e:+e-r.now();return r.schedule(p,n,{index:0,period:i,subscriber:t})})}(500).pipe(Object(m.a)(()=>e.value?this.accountService.checkEmailExists(e.value).pipe(Object(g.a)(e=>e?{emailExists:!0}:null)):Object(d.a)(null)))}}return e.\u0275fac=function(t){return new(t||e)(f.Jb(h.a),f.Jb(n.c),f.Jb(o.a),f.Jb(n.a))},e.\u0275cmp=f.Db({type:e,selectors:[["app-login"]],decls:21,vars:11,consts:[[1,"uk-container","uk-margin-top"],[1,"uk-form-stacked",3,"formGroup","ngSubmit"],["formControlName","email",3,"label"],["formControlName","password",3,"label","type"],[1,"uk-margin"],[1,"uk-button","uk-button-primary",3,"disabled"],["class","uk-list",4,"ngIf"],[1,"uk-list"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(f.Nb(0),f.Pb(1,"div",0),f.Pb(2,"div"),f.Pb(3,"h2"),f.sc(4,"Login"),f.Ob(),f.Pb(5,"form",1),f.Wb("ngSubmit",function(){return t.onLogin()}),f.Kb(6,"app-text-input",2),f.Kb(7,"app-text-input",3),f.Pb(8,"div",4),f.Pb(9,"button",5),f.sc(10," Login "),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Pb(11,"div"),f.Pb(12,"h2"),f.sc(13,"Register"),f.Ob(),f.rc(14,y,2,1,"ul",6),f.Pb(15,"form",1),f.Wb("ngSubmit",function(){return t.onRegister()}),f.Kb(16,"app-text-input",2),f.Kb(17,"app-text-input",3),f.Pb(18,"div",4),f.Pb(19,"button",5),f.sc(20," Login "),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Mb()),2&e&&(f.yb(5),f.ec("formGroup",t.loginForm),f.yb(1),f.ec("label","Email address"),f.yb(1),f.ec("label","Password")("type","password"),f.yb(2),f.ec("disabled",t.loginForm.invalid),f.yb(5),f.ec("ngIf",t.registerErrors),f.yb(1),f.ec("formGroup",t.registerForm),f.yb(1),f.ec("label","Email address"),f.yb(1),f.ec("label","Password")("type","password"),f.yb(2),f.ec("disabled",t.registerForm.invalid))},directives:[o.m,o.g,o.c,v.a,o.f,o.b,i.m,i.l],styles:[""]}),e})()},{path:"register",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Db({type:e,selectors:[["app-register"]],decls:2,vars:0,template:function(e,t){1&e&&(f.Pb(0,"p"),f.sc(1,"register works!"),f.Ob())},styles:[""]}),e})()}];let k=(()=>{class e{}return e.\u0275mod=f.Hb({type:e}),e.\u0275inj=f.Gb({factory:function(t){return new(t||e)},imports:[[n.g.forChild(O)],n.g]}),e})();var P=r("PCNd");let F=(()=>{class e{}return e.\u0275mod=f.Hb({type:e}),e.\u0275inj=f.Gb({factory:function(t){return new(t||e)},imports:[[i.c,k,P.a]]}),e})()}}]);
//# sourceMappingURL=6.ac2b545716d3140b0853.js.map